package com.ktdsuniversity.edu.abstracts;
//VIP등급일 경우 3% 할인 
//VVIP인 경우 10% 할인 혜택을 제공받고 3%의 포인트를 지급 받습니다.
public class DepartmentStore extends AbstractMart{
	
	public DepartmentStore(int productPrice) {
		super(productPrice);
	}
	
	//고객의 포인트가 10000점이 넘어갈 경우, 현금처럼 사용할 수 있습니다.
	// - 포인트는 전액을 사용하거나 일부만 사용할 수도 있습니다.
	//쓸지 말지 물어본다
	@Override
	public int usePoint(Guest guest) {
	    if (guest.getPoint() >= 10000) {
	        if (Math.random() > 0.5) {
	            int point = guest.getPoint();
	            guest.addPoint(-point);      
	            System.out.println("포인트를 " + point + "만큼 사용합니다.");
	            return point;            
	        }else {
	        	System.out.println("포인트를 사용하지 않습니다");
	        }
	    }
	    return 0;
	}
	
	@Override
	public void givePoint(Guest guest, int amount) {
		/**
		 * Guest : Guest is a Guest
		 * 	   VIP : VIP is a Guest
		 *       VVIP : VVIP is a VIP and Guest
		 */
		double pointRate = 0.005;
		
		if (guest instanceof VVIP) {
			pointRate = 0.03;
		} else if (guest instanceof VIP) {
			pointRate = 0;
		}
		double point = amount * pointRate;
		guest.addPoint((int)point);
	}
	
	@Override
	public int discount(Guest guest, int amount) {
		double discountRate = 0;
			
		if(guest instanceof VVIP) {
			discountRate = 0.1;
		}else if(guest instanceof VIP){
			discountRate = 0.03;
		}
		return (int)(amount * discountRate);
	}
	
}