package com.ktdsuniversity.edu.abstracts;
/**
 * public class Name : 인스턴스로 생성할 수 있는 일반클래스 정의
 * public abstract class Name : 인스턴스로 생성할 수 없는 추상 클래스 정의
 */
public abstract class AbstractMart {
	
	private int safe;
	private int productPrice;
	private int remainmoney;//고객에게 거슬러 줄 돈
	
	public AbstractMart(int productPrice) {
		this.productPrice = productPrice;
	}
	
	public void sell(Guest guest, int sellCount, int money) {
		this.remainmoney = money;
		
		
		int guestPoint = this.usePoint(guest);
		
		
		int amount = sellCount*this.productPrice;//판매가격

		amount -=this.discount(guest, amount);
		
		if(money + guestPoint< amount) {
			System.out.println("돈이 모자랍니다. 구매가격: " + amount );
			System.out.println("손님이 낸 돈: " + money);
			return;
		}
		//손님이 마트에 돈을 지불.
		guest.pay(money);
		System.out.println(amount);
		this.givePoint(guest, amount);
		
		if(amount > guestPoint) {
			this.remainmoney -= amount - guestPoint;
		}
		
		this.safe += money - this.remainmoney;
		System.out.println("최종 결제 금액: " + (money - this.remainmoney));
		System.out.println("매출액: " + this.safe);
		System.out.println("거슬러 줄 돈: " + this.remainmoney);
		System.out.println();
		//마트가 손님에게 거슬러 준다.
		guest.giveMoney(this.remainmoney);
		this.remainmoney = 0;
		
		
		
		
	}
	
	public abstract int usePoint(Guest guest);//메소드를 정의만한다. 
	
	public abstract void givePoint(Guest guest, int amount);
	
	public abstract int discount(Guest guest, int amount);
	
	
}
